generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model UserProfile {
  id               String    @id @default(cuid())
  userId           String    @unique
  email            String    @unique
  name             String?
  image            String?
  emailVerified    DateTime?
  backendAccountId Int?
  initApiKey       String?
  plan             String    @default("free")
  preferences      Json?     @default("{}")
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  @@index([userId])
  @@index([email])
  @@index([backendAccountId])
}

model PaymentCustomer {
  id               String   @id @default(cuid())
  userId           String   @unique
  stripeCustomerId String?  @unique
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([stripeCustomerId])
}
